<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Clojure</title>
<!-- 2016-11-01 ter 01:52 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link href="/Functional-Programming/theme/style.css" rel="stylesheet">

<script type="text/javascript" src="/Functional-Programming/theme/org-info.js">
/**
 *
 * @source: /Functional-Programming/theme/org-info.js
 *
 * @licstart  The following is the entire license notice for the
 *  JavaScript code in /Functional-Programming/theme/org-info.js.
 *
 * Copyright (C) 2012-2013 Free Software Foundation, Inc.
 *
 *
 * The JavaScript code in this tag is free software: you can
 * redistribute it and/or modify it under the terms of the GNU
 * General Public License (GNU GPL) as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option)
 * any later version.  The code is distributed WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.
 *
 * As additional permission under GNU GPL version 3 section 7, you
 * may distribute non-source (e.g., minimized or compacted) forms of
 * that code without the copy of the GNU GPL normally required by
 * section 4, provided you include this license notice and a URL
 * through which recipients can access the Corresponding Source.
 *
 * @licend  The above is the entire license notice
 * for the JavaScript code in /Functional-Programming/theme/org-info.js.
 *
 */
</script>

<script type="text/javascript">

/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/

<!--/*--><![CDATA[/*><!--*/
org_html_manager.set("TOC_DEPTH", "4");
org_html_manager.set("LINK_HOME", "");
org_html_manager.set("LINK_UP", "");
org_html_manager.set("LOCAL_TOC", "1");
org_html_manager.set("VIEW_BUTTONS", "0");
org_html_manager.set("MOUSE_HINT", "underline");
org_html_manager.set("FIXED_TOC", "0");
org_html_manager.set("TOC", "1");
org_html_manager.set("VIEW", "showall");
org_html_manager.setup();  // activate after the parameters are set
/*]]>*///-->
</script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Clojure</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Clojure</a>
<ul>
<li><a href="#sec-1-1">1.1. Overview</a></li>
<li><a href="#sec-1-2">1.2. Toolset and Files Formats</a></li>
<li><a href="#sec-1-3">1.3. Basic Syntax</a>
<ul>
<li><a href="#sec-1-3-1">1.3.1. Variables</a></li>
<li><a href="#sec-1-3-2">1.3.2. Function Declaration</a>
<ul>
<li><a href="#sec-1-3-2-1">1.3.2.1. Simple Function</a></li>
<li><a href="#sec-1-3-2-2">1.3.2.2. Function With Docstring</a></li>
<li><a href="#sec-1-3-2-3">1.3.2.3. Variadic Function</a></li>
<li><a href="#sec-1-3-2-4">1.3.2.4. Function with Optional arguments</a></li>
<li><a href="#sec-1-3-2-5">1.3.2.5. Function with Predefined Values</a></li>
<li><a href="#sec-1-3-2-6">1.3.2.6. Anonymous/ Lambda Functions</a></li>
</ul>
</li>
<li><a href="#sec-1-3-3">1.3.3. Predicates</a></li>
<li><a href="#sec-1-3-4">1.3.4. Data Types</a></li>
<li><a href="#sec-1-3-5">1.3.5. String Functions</a>
<ul>
<li><a href="#sec-1-3-5-1">1.3.5.1. Basic String Functions</a></li>
<li><a href="#sec-1-3-5-2">1.3.5.2. String Parsing Functions</a></li>
</ul>
</li>
<li><a href="#sec-1-3-6">1.3.6. Important Functions</a>
<ul>
<li><a href="#sec-1-3-6-1">1.3.6.1. Special Functions</a></li>
<li><a href="#sec-1-3-6-2">1.3.6.2. Higher Order Functions</a></li>
<li><a href="#sec-1-3-6-3">1.3.6.3. Lazy Higher Order Functions</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-1-4">1.4. List Comprehension</a></li>
<li><a href="#sec-1-5">1.5. S-expression parser, Serializer and Interpreter</a></li>
<li><a href="#sec-1-6">1.6. IO / Input and Output</a></li>
<li><a href="#sec-1-7">1.7. Documentation / Docstring and Reflection, Instrospection</a></li>
<li><a href="#sec-1-8">1.8. Macros</a>
<ul>
<li><a href="#sec-1-8-1">1.8.1. Quasi quote</a></li>
<li><a href="#sec-1-8-2">1.8.2. Macros by Example</a></li>
</ul>
</li>
<li><a href="#sec-1-9">1.9. Java Interoperability</a>
<ul>
<li><a href="#sec-1-9-1">1.9.1. Java API Access</a></li>
<li><a href="#sec-1-9-2">1.9.2. Call Class Static Method</a></li>
<li><a href="#sec-1-9-3">1.9.3. Java Constructor and Methods</a></li>
<li><a href="#sec-1-9-4">1.9.4. Doto Macro</a>
<ul>
<li><a href="#sec-1-9-4-1">1.9.4.1. Doto Macro Expansion</a></li>
<li><a href="#sec-1-9-4-2">1.9.4.2. Simple GUI</a></li>
<li><a href="#sec-1-9-4-3">1.9.4.3. Java Import</a></li>
</ul>
</li>
<li><a href="#sec-1-9-5">1.9.5. Classpath</a></li>
<li><a href="#sec-1-9-6">1.9.6. Load Jar file at run time</a></li>
<li><a href="#sec-1-9-7">1.9.7. Java Instrospection</a></li>
<li><a href="#sec-1-9-8">1.9.8. Miscellaneous</a>
<ul>
<li><a href="#sec-1-9-8-1">1.9.8.1. Parse Date</a></li>
<li><a href="#sec-1-9-8-2">1.9.8.2. Get String from Clipboard</a></li>
<li><a href="#sec-1-9-8-3">1.9.8.3. Http POST/GET</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-1-10">1.10. Resources</a>
<ul>
<li><a href="#sec-1-10-1">1.10.1. Books</a></li>
<li><a href="#sec-1-10-2">1.10.2. Tutorials</a></li>
<li><a href="#sec-1-10-3">1.10.3. Misc</a></li>
<li><a href="#sec-1-10-4">1.10.4. Design</a></li>
<li><a href="#sec-1-10-5">1.10.5. Selected Projects</a></li>
<li><a href="#sec-1-10-6">1.10.6. Presentation</a></li>
<li><a href="#sec-1-10-7">1.10.7. Cases</a></li>
<li><a href="#sec-1-10-8">1.10.8. Selected Stack Overflow Questions</a></li>
<li><a href="#sec-1-10-9">1.10.9. Jar Repositories</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<lu> 
  <li><a href="/Functional-Programming/index.html">Index</a></li>
  <li><a href="https://github.com/caiorss/Functional-Programming">Repository</a></li>
</lu>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Clojure</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> Overview</h3>
<div class="outline-text-3" id="text-1-1">
<p>
Clojure is a functional programming lisp dialect that leverages the access to all Java platform libraries. It is based on Scheme, Common Lisp, ML and Haskell.
</p>

<p>
Features:
</p>

<ul class="org-ul">
<li>Java API interface
</li>
<li>Hosted on JVM (Java Virtual Machine)
</li>
<li>Can compile to Java Bytecodes
</li>
<li>Immutable data types
</li>
<li>Very readable lisp syntax
</li>
<li>Common lisp style macros
</li>
<li>Functional Programming capabilities
</li>
<li>Meta-programming capabilities
</li>
<li>Namespace handling
</li>
<li>Dynamic Typing
</li>
</ul>

<p>
Downsides:
</p>

<ul class="org-ul">
<li>Slow startup time.
</li>
<li>Don't have tail recursion elimination, so loop must be used instead of recursion.
</li>
<li>Low IDE support
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> Toolset and Files Formats</h3>
<div class="outline-text-3" id="text-1-2">
<p>
<b>File Formats</b>
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">.clj</td>
<td class="left">Clojure Source Code.</td>
</tr>

<tr>
<td class="left">.class</td>
<td class="left">Compiled java byte code</td>
</tr>

<tr>
<td class="left">.jar</td>
<td class="left">Java archive - A zip file containing compiled java classes.</td>
</tr>

<tr>
<td class="left">.war</td>
<td class="left">Web Application to be deployed on servlet.</td>
</tr>

<tr>
<td class="left">pom.xml</td>
<td class="left">Project Object Model, stores project data and various configuration detail used by Maven to build the project</td>
</tr>
</tbody>
</table>

<p>
<b>Tools</b>
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Tool</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><a href="https://en.wikipedia.org/wiki/Apache_Ant">Ant</a></td>
<td class="left">Tool to build java code, equivalent to Makefile in C</td>
</tr>

<tr>
<td class="left"><a href="https://maven.apache.org/what-is-maven.html">Maven</a></td>
<td class="left">Build automation tool that can resolve dependecies.</td>
</tr>

<tr>
<td class="left"><a href="http://leiningen.org/">Lenigren</a></td>
<td class="left">Tool to automate, build, deployment and testing of Clojure code.</td>
</tr>
</tbody>
</table>


<p>
<b>Lein</b>
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">lein deps</td>
<td class="left">Installs dependencies in lib/ directory</td>
</tr>

<tr>
<td class="left">lein test &lt;pred&gt;</td>
<td class="left">Runs the project's tests, optionally filtered on PRED</td>
</tr>

<tr>
<td class="left">lein compile</td>
<td class="left">Ahead-of-time compiles into classes/</td>
</tr>

<tr>
<td class="left">lein repl</td>
<td class="left">Launches a REPL with the project classpath configured</td>
</tr>

<tr>
<td class="left">lein clean</td>
<td class="left">Removes all build artifacts</td>
</tr>

<tr>
<td class="left">lein jar</td>
<td class="left">Creates a jar of the project</td>
</tr>

<tr>
<td class="left">lein uberjar</td>
<td class="left">Creates a standalone jar with all dependencies</td>
</tr>

<tr>
<td class="left">lein pom</td>
<td class="left">Outputs a pom.xml file for interop with Maven</td>
</tr>

<tr>
<td class="left">lein install</td>
<td class="left">Installs in local repo (currently requires mvn)</td>
</tr>

<tr>
<td class="left">lein help &lt;task&gt;</td>
<td class="left">Displays tasks</td>
</tr>
</tbody>
</table>

<ul class="org-ul">
<li><a href="http://alexott.net/en/clojure/ClojureLein.html">Using Leiningen to build Clojure code</a>
</li>

<li><a href="http://www.infoq.com/news/2009/11/clojars-leiningen-clojure">Clojars and Leiningen Automate Library and Dependency Management for Clojure</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> Basic Syntax</h3>
<div class="outline-text-3" id="text-1-3">
</div><div id="outline-container-sec-1-3-1" class="outline-4">
<h4 id="sec-1-3-1"><span class="section-number-4">1.3.1</span> Variables</h4>
<div class="outline-text-4" id="text-1-3-1">
</div><ol class="org-ol"><li><a id="sec-1-3-1-0-1" name="sec-1-3-1-0-1"></a>Global Variables<br  /><div class="outline-text-6" id="text-1-3-1-0-1">
<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (def a 100.23)
#'user/a
user=&gt; (def alist '(1 2 3 4 5))
#'user/alist
user=&gt; (def my-string "Hello world Clojure")
#'user/my-string
user=&gt; a
100.23
user=&gt; my-string
"Hello world Clojure"
user=&gt; alist
(1 2 3 4 5)
user=&gt;


user=&gt; 
user=&gt; (def list-of-symbols '(sym1 symb2 sym3))
#'user/list-of-symbols
user=&gt; list-of-symbols
(sym1 symb2 sym3)
user=&gt;
</pre>
</div>
</div>
</li>

<li><a id="sec-1-3-1-0-2" name="sec-1-3-1-0-2"></a>Lexical Bind (Local Variables)<br  /><div class="outline-text-6" id="text-1-3-1-0-2">
<div class="org-src-container">

<pre class="src src-clojure"> user=&gt; (let [
            a 10
            b 20
            c 100]
            (+ a b c))
130
user=&gt;
</pre>
</div>
</div>
</li></ol>
</div>


<div id="outline-container-sec-1-3-2" class="outline-4">
<h4 id="sec-1-3-2"><span class="section-number-4">1.3.2</span> Function Declaration</h4>
<div class="outline-text-4" id="text-1-3-2">
</div><div id="outline-container-sec-1-3-2-1" class="outline-5">
<h5 id="sec-1-3-2-1"><span class="section-number-5">1.3.2.1</span> Simple Function</h5>
<div class="outline-text-5" id="text-1-3-2-1">
<div class="org-src-container">

<pre class="src src-clojure"> user=&gt; (defn f [x y] (+ (* 3 x) (* 4 y)))
 #'user/f
user=&gt; 
user=&gt; (f 4 5)
32
user=&gt; (f 5 6)
39
user=&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-3-2-2" class="outline-5">
<h5 id="sec-1-3-2-2"><span class="section-number-5">1.3.2.2</span> Function With Docstring</h5>
<div class="outline-text-5" id="text-1-3-2-2">
<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (defn sqr [x]
         "Computes the square of a number"             
         (* x x))
 #'user/sqr
user=&gt; (sqr 10)
100
user=&gt; (map sqr '(1 2 3 4 5 6))
(1 4 9 16 25 36)
user=&gt;



user=&gt; (doc sqr)
 -------------------------
user/sqr
([x])
  Computes the square of a number
nil
user=&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-3-2-3" class="outline-5">
<h5 id="sec-1-3-2-3"><span class="section-number-5">1.3.2.3</span> Variadic Function</h5>
<div class="outline-text-5" id="text-1-3-2-3">
<p>
Function with variable number of arguments:
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (defn my-variadic-fun [&amp; vars]
          (println vars))


user=&gt; 
user=&gt; (my-variadic-fun 1 2 3 4 'z 'w )
(1 2 3 4 z w)
nil

user=&gt; (my-variadic-fun 1 2 3 4 'z 'w :key)
(1 2 3 4 z w :key)
nil
user=&gt; 

user=&gt; (my-variadic-fun)
nil

user=&gt; (defn variadic2 [x &amp; vars]
        (do (println x)
          (println vars)))


user=&gt; 
user=&gt; (variadic2  2 'a 'b' 'c 'd)
2
(a b' c d)
nil
user=&gt; 

user=&gt; (variadic2  10)
10
nil
nil
user=&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-3-2-4" class="outline-5">
<h5 id="sec-1-3-2-4"><span class="section-number-5">1.3.2.4</span> Function with Optional arguments</h5>
<div class="outline-text-5" id="text-1-3-2-4">
<div class="org-src-container">

<pre class="src src-clojure">(defn fun-optional-c [a b &amp; [c]]
    {:a a :b b :c c})

user=&gt; (fun-optional-c 1 2)
{:a 1, :b 2, :c nil}

user=&gt; 
user=&gt; (fun-optional-c 1 2 3)
{:a 1, :b 2, :c 3}
user=&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-3-2-5" class="outline-5">
<h5 id="sec-1-3-2-5"><span class="section-number-5">1.3.2.5</span> Function with Predefined Values</h5>
<div class="outline-text-5" id="text-1-3-2-5">
<div class="org-src-container">

<pre class="src src-clojure">(defn predefined-c-and-d [a b &amp; {:keys [c d] :or {c 100 d 30}}]
    { :a a, 
      :b b,
      :c c,
      :d d}) 

user=&gt; (predefined-c-and-d 10 20)
{:a 10, :b 20, :c 100, :d 30}
user=&gt; 

user=&gt; (predefined-c-and-d 10 20 :c 'c )
{:a 10, :b 20, :c c, :d 30}
user=&gt; 

user=&gt; (predefined-c-and-d 10 20 :d -100 )
{:a 10, :b 20, :c 100, :d -100}
user=&gt; 

user=&gt; (predefined-c-and-d 10 20 :c -90 :d -232 )
{:a 10, :b 20, :c -90, :d -232}
user=&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-3-2-6" class="outline-5">
<h5 id="sec-1-3-2-6"><span class="section-number-5">1.3.2.6</span> Anonymous/ Lambda Functions</h5>
<div class="outline-text-5" id="text-1-3-2-6">
<pre class="example">
(fn [&lt;args&gt;] (&lt;body&gt;))
</pre>

<p>
<b>Anonymous Functions</b>
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (fn [x] (* x x))
#object[user$eval369$fn__370 0x11bfe23 "user$eval369$fn__370@11bfe23"]
user=&gt;    

user=&gt; ((fn [x] (* x x)) 5)
25
user=&gt; 

user=&gt; (map (fn [x] (* x x)) '(1 2 3 4 5))
(1 4 9 16 25)
user=&gt; (map (fn [x] (* x x)) '[1 2 3 4 5])
(1 4 9 16 25)
user=&gt; 


user=&gt; (map (fn [x] (* x x)) (range 1 10))
(1 4 9 16 25 36 49 64 81)
user=&gt; 

user=&gt; ((fn [x y] (+ ( * 2 x) (* 3 y))) 10 20)
80
user=&gt; 

user=&gt;  ((fn [a b c] (+ a b c)) 2 4 6)
12
user=&gt; 

;;; Lambda functions can be stored in variables
;;;
user=&gt; (def f_xy  (fn [x y] (+ (* 2 x) (* 3 y))))
#'user/f_xy
user=&gt; 
user=&gt; (f_xy 10 20)
80
user=&gt; (f_xy 10 30)
110
user=&gt;
</pre>
</div>

<p>
<b>Lambda Function Macro</b>
</p>

<p>
Clojure has a pretty handy macro that allows to create lambda functions easily.
</p>

<div class="org-src-container">

<pre class="src src-clojure">    user=&gt; (#(+ 3 %) 4)
    7
    user=&gt; (#(+ 3 %) 5)
    8
    user=&gt; (map #(+ 3 %) '[1 2 3 4 5])
    (4 5 6 7 8)
    user=&gt; 

;;; This is equivalent to
;;
    user=&gt; (map (fn [x] (+ 3 x)) '[1 2 3 4 5])
    (4 5 6 7 8)

    user=&gt; (Math/pow 2 3)
    8.0


    user=&gt; (map #(Math/pow % 3) '[1 2 3 4 5 6])
    (1.0 8.0 27.0 64.0 125.0 216.0)

   ;; It is equivalent to:

    user=&gt; (map (fn [x] (Math/pow x 3)) '[1 2 3 4 5 6])
    (1.0 8.0 27.0 64.0 125.0 216.0)
    user=&gt; 

    ;;;;;;;

    user=&gt; (map #(Math/pow 2 %) '[1 2 3 4 5 6])
    (2.0 4.0 8.0 16.0 32.0 64.0)    

    ;;;------------------------------------;;



    user=&gt; #(+ (* 3 %1) (* 4 %2))
    #object[user$eval435$fn__436 0x79dfad "user$eval435$fn__436@79dfad"]
    user=&gt; 

    ;; It is equivalent to

    user=&gt; (fn [x y] (+ (* 3 x) (* 4 y)))
    #object[user$eval439$fn__440 0x1629510 "user$eval439$fn__440@1629510"]
    user=&gt;     

    user=&gt; ( #(+ (* 3 %1) (* 4 %2)) 4 5)
    32
    user=&gt; 

    user=&gt; (map #(+ (* 3 %1) (* 4 %2)) '[1 2 3 4 5] '[4 5 6 8 9])
    (19 26 33 44 51)
    user=&gt;
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-3-3" class="outline-4">
<h4 id="sec-1-3-3"><span class="section-number-4">1.3.3</span> Predicates</h4>
<div class="outline-text-4" id="text-1-3-3">
<p>
Type Checking Predicates
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Predicate</th>
<th scope="col" class="left">Returns true for</th>
<th scope="col" class="left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">symbol?</td>
<td class="left"><code>(symbol? 'sym)</code></td>
<td class="left">Symbol</td>
</tr>

<tr>
<td class="left">string?</td>
<td class="left"><code>(string? "something")</code></td>
<td class="left">String</td>
</tr>

<tr>
<td class="left">list?</td>
<td class="left"><code>(list?  '(1 2 3 4 5))</code></td>
<td class="left">List, linked list</td>
</tr>

<tr>
<td class="left">vector?</td>
<td class="left"><code>(vector? '[1 2 3 4])</code></td>
<td class="left">Array</td>
</tr>

<tr>
<td class="left">map?</td>
<td class="left"><code>(map? {:a 10 :b 20 :c 30})</code></td>
<td class="left">Hash table</td>
</tr>

<tr>
<td class="left">number?</td>
<td class="left"><code>(number? 2.23)</code></td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">nil?</td>
<td class="left"><code>(nil? nil)</code></td>
<td class="left">End of a list or java null value</td>
</tr>
<tbody>
<tr>
</tr>
</tbody>
</table>

<p>
Special Predicates
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Predicate</th>
<th scope="col" class="left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">true?</td>
<td class="left">Test if value is true</td>
</tr>

<tr>
<td class="left">false?</td>
<td class="left">Test if value is false</td>
</tr>

<tr>
<td class="left">nil?</td>
<td class="left">Test if value is nil (java null)</td>
</tr>

<tr>
<td class="left">empty?</td>
<td class="left">Test if list, vector or map(hash) is empty</td>
</tr>
</tbody>
</table>


<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (map symbol? '(symbol 1 2.323 "hello"))
(true false false false)
user=&gt;


user=&gt; (map number? '(symbol 1 2.323 "hello"))
(false true true false)
user=&gt;


user=&gt; (map string? '(symbol 1 2.323 "hello"))
(false false false true)
user=&gt;


user=&gt; (map list? '(symbol 1 2.323 "hello" nil '() (1 2 3 4)))
(false false false false false true true)
user=&gt;


user=&gt; (empty? {})
true
user=&gt; (empty? '())
true
user=&gt; (empty? '[])
true
user=&gt; 

user=&gt; (nil? nil)
true
user=&gt; (nil? {})
false
user=&gt; (nil? '())
false
user=&gt; (nil? '[])
false
user=&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-3-4" class="outline-4">
<h4 id="sec-1-3-4"><span class="section-number-4">1.3.4</span> Data Types</h4>
<div class="outline-text-4" id="text-1-3-4">
<p>
<b>Symbol</b>
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (type 'sym)
clojure.lang.Symbol
user=&gt; 

user=&gt; (class 'sym)
clojure.lang.Symbol
user=&gt; 

user=&gt; 'this-as-symbol
this-as-symbol

user=&gt; '(list of symbols)
(list of symbols)
user=&gt; 

user=&gt; '[vector of symbols]
[vector of symbols]
user=&gt;

user=&gt; [:a :b :c]
[:a :b :c]


user=&gt; (keyword "hello")
:hello
user=&gt;
</pre>
</div>


<p>
<b>String</b> 
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; "a string"
"a string"

user=&gt; (class "a string")
java.lang.String

user=&gt; (type "a string")
java.lang.String
user=&gt;
</pre>
</div>

<p>
<b>Number</b>
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; 0x1023
4131
user=&gt; 

user=&gt; -10e3
-10000.0
user=&gt; 

user=&gt; 
user=&gt; (type 1e3)
java.lang.Double
user=&gt; (type 1000)
java.lang.Long
user=&gt; (type 10)
java.lang.Long
user=&gt; (class 1e3)
java.lang.Double
user=&gt;
</pre>
</div>

<p>
<b>List</b>
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; 
user=&gt; (type '(a b c d e))
clojure.lang.PersistentList
user=&gt; 
user=&gt; (class '(1 2 3 4 5))
clojure.lang.PersistentList
user=&gt; 

user=&gt; (def xs '(1 2 3 4 5))
#'user/xs
user=&gt; 

user=&gt; (first xs)
1
user=&gt; (second xs)
2
user=&gt; (rest xs)
(2 3 4 5)
user=&gt; 

;; Get the nth element
;;------------------------
user=&gt; 
user=&gt; (nth xs 0)
1
user=&gt; (nth xs 1)
2
user=&gt; (nth xs 3)
4
user=&gt; 


;; List Constructor Cons
;;
user=&gt; (cons 1 nil)
(1)
user=&gt; (cons 1 (cons 2 (cons 3 nil)))
(1 2 3)
user=&gt;
</pre>
</div>

<p>
<b>Vector</b>
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (type [1 2 3 4])
clojure.lang.PersistentVector
user=&gt; 

user=&gt; (class [1 2 3 4])
clojure.lang.PersistentVector
user=&gt;

user=&gt; (nth [1 2 3 4] 0)
1
user=&gt; (nth [1 2 3 4] 3)
4
user=&gt; (first [1 2 3 4])
1
user=&gt; (second [1 2 3 4])
2
user=&gt; (rest [1 2 3 4])
(2 3 4)
user=&gt;
</pre>
</div>

<p>
<b>Hash Map / Hash Table</b>
</p>

<div class="org-src-container">

<pre class="src src-clojure">;; Create a Hash map
;;----------------------
user=&gt; 
user=&gt; (def params { :sn "10" :cn "" :locale "ptBR" :num 12345})
#'user/params
user=&gt; (:keys params)
nil

;; Get all keys
;;----------------------
user=&gt; (keys params)
(:sn :cn :locale :num)
user=&gt; 
user=&gt; 

;; Select all values
;;----------------------
user=&gt; (vals params)
("10" "" "ptBR" 12345)
user=&gt;

;; Select a single key
;;----------------------
user=&gt; (get params :locale)
"ptBR"
user=&gt; (get params :x)
nil
user=&gt; (get params :x 'alternative)
alternative
user=&gt; 

;; Select Multiple Keys
;;
user=&gt; (select-keys params [:cn :sn])
{:cn "", :sn "10"}
user=&gt; (select-keys params [:cn :sn :dumy])
{:cn "", :sn "10"}
user=&gt; 

;; Select the value from mmultiple keys 
;;
(defn select-vals [params keys]
  (vals (select-keys params keys)))    

user=&gt; (select-vals {:a 123 :b 234 "hello" "world"} [:a "hello"])
(123 "world")
user=&gt;     

user=&gt; (defn apply-vals [hmap f &amp; ks]
          (apply f (select-vals hmap ks)))
#'user/apply-vals
user=&gt; 
user=&gt; (apply-vals {:id 102 :price 10.4 :n 20} * :price :n)
208.0
user=&gt; 

;;  Create a dictionary from two arrays
;;
user=&gt; (zipmap ["x" "y" "z"] [10 20 -30])
{"x" 10, "y" 20, "z" -30}
user=&gt; 

(defn format-params [params]
    (clojure.string/join "&amp;"
                   (map #(format "%s=%s" %1 %2)
                        (keys params) (vals params))))

user=&gt; (format-params {"x" "1200" "y" 302 "user" "dummy"})
    "x=1200&amp;y=302&amp;user=dummy"
</pre>
</div>
</div>
</div>


<div id="outline-container-sec-1-3-5" class="outline-4">
<h4 id="sec-1-3-5"><span class="section-number-4">1.3.5</span> String Functions</h4>
<div class="outline-text-4" id="text-1-3-5">
</div><div id="outline-container-sec-1-3-5-1" class="outline-5">
<h5 id="sec-1-3-5-1"><span class="section-number-5">1.3.5.1</span> Basic String Functions</h5>
<div class="outline-text-5" id="text-1-3-5-1">
<div class="org-src-container">

<pre class="src src-clojure">;; Load clojure.string namespace as str 
;;
(require '[clojure.string :as str])

;; List all functions in the namespace
;;
;;----------------------------
user=&gt; (dir clojure.string)
blank?
capitalize
escape
join
lower-case
re-quote-replacement
replace
replace-first
reverse
split
split-lines
trim
trim-newline
triml
trimr
upper-case
nil
user=&gt;     


user=&gt; (str/split-lines  "line1\nline2\nline3")
["line1" "line2" "line3"]
user=&gt; 

user=&gt; (str/split-lines  "line1\rline2\rline3")
["line1\rline2\rline3"]
user=&gt; 

user=&gt; (str/replace "foo bar foobars" #"foo" "0x00121")
"0x00121 bar 0x00121bars"
user=&gt;     

user=&gt; (str/join "," ["x" "y" "z"])
"x,y,z"
user=&gt; 

user=&gt; (str/trim "   \n\n\nsome \n white space \n\n\n")
"some \n white space"
user=&gt; 

user=&gt; (str/split "a,b,c,d," #",")
["a" "b" "c" "d"]
user=&gt; 


user=&gt; (str/join "-" ["a" "b" "c" "d"])
"a-b-c-d"
user=&gt; 

user=&gt; (map str/blank? ["" "\n" "\r" "\r\n" " " "\t" "asdas"])
(true true true true true true false)
user=&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-3-5-2" class="outline-5">
<h5 id="sec-1-3-5-2"><span class="section-number-5">1.3.5.2</span> String Parsing Functions</h5>
<div class="outline-text-5" id="text-1-3-5-2">
<p>
<b>Integer -&gt; String</b>
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (Integer/parseInt "202323")
202323

;; Scheme Notation: [from type]-&gt;[to type]
;;
user=&gt; (defn string-&gt;int [str] 
            (Integer/parseInt str))
#'user/string-&gt;int
user=&gt; 
user=&gt; (string-&gt;int "10223232")
10223232
user=&gt;
</pre>
</div>

<p>
<b>Float -&gt; String</b>
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (Float/parseFloat "2323.2323e-3")
2.3232324
user=&gt; 

(defn string-&gt;float [str]
    (Float/parseFloat str))
</pre>
</div>
</div>
</div>
</div>


<div id="outline-container-sec-1-3-6" class="outline-4">
<h4 id="sec-1-3-6"><span class="section-number-4">1.3.6</span> Important Functions</h4>
<div class="outline-text-4" id="text-1-3-6">
</div><div id="outline-container-sec-1-3-6-1" class="outline-5">
<h5 id="sec-1-3-6-1"><span class="section-number-5">1.3.6.1</span> Special Functions</h5>
<div class="outline-text-5" id="text-1-3-6-1">
<p>
<b>Constantly</b>
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (map (constantly 10) '(1 2 3 4 5 6))
(10 10 10 10 10 10)
user=&gt;
</pre>
</div>

<p>
<b>Identity</b>
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (map identity '(a b c d 1 2 3 "hello" world))
(a b c d 1 2 3 "hello" world)
user=&gt;
</pre>
</div>

<p>
<b>Range</b>
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (range 1 10)
(1 2 3 4 5 6 7 8 9)

user=&gt; (range 0 100 10)
(0 10 20 30 40 50 60 70 80 90)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-3-6-2" class="outline-5">
<h5 id="sec-1-3-6-2"><span class="section-number-5">1.3.6.2</span> Higher Order Functions</h5>
<div class="outline-text-5" id="text-1-3-6-2">
<p>
<b>Map</b>
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (map (fn [x] (* x x)) '(1 2 3 4 5 6))
(1 4 9 16 25 36)
user=&gt; 

user=&gt; (map (fn [x y] (+ (* x x) (* y y))) '(1 2 3 4 5) '(3 5 7 8 9))
(10 29 58 80 106)
user=&gt;
</pre>
</div>

<p>
<b>Mapv</b>
</p>

<p>
Mapv works just like map, except that it returns a vector instead of a list. 
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (map #(* % 2) (range 10))
(0 2 4 6 8 10 12 14 16 18)
user=&gt; 


user=&gt; (mapv #(* % 2) (range 10))
[0 2 4 6 8 10 12 14 16 18]
user=&gt;
</pre>
</div>

<p>
<b>Mapcat</b>
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; 
(defn single-double-triple [x]
  [(* x 1) (* x 2) (* x 3)])
#'user/single-double-triple
user=&gt; 
user=&gt; (mapcat single-double-triple (range 10))
(0 0 0 1 2 3 2 4 6 3 6 9 4 8 12 5 10 15 6 12 18 7 14 21 8 16 24 9 18 27)
user=&gt;
</pre>
</div>

<p>
<b>For-each</b>
</p>

<p>
It is not defined in the standard library, however it is pretty useful function from scheme to map a function with side effect to a list or vector.
</p>

<div class="org-src-container">

<pre class="src src-clojure">(defn for-each [f xs] (doseq [x xs] (f x)))

user=&gt; (for-each println '[1 2 3 4 5 6])
1
2
3
4
5
6
nil
user=&gt;
</pre>
</div>


<p>
<b>Filter</b>
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (filter even? (range 1 20))
(2 4 6 8 10 12 14 16 18)
user=&gt; 
user=&gt; (filter odd? (range 1 20))
(1 3 5 7 9 11 13 15 17 19)
user=&gt;
</pre>
</div>

<p>
<b>Apply</b>
</p>

<p>
Apply a function to a list of arguments
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (defn f [x y] (+ (* 3 x) (* 4 y)))

user=&gt; 
user=&gt; (apply f '(7 8))
53
user=&gt; 

user=&gt; (apply f '(7 8))
53
user=&gt; (defn map-apply [f arglist] (map (fn [xs] (apply f xs)) arglist))
#'user/map-apply
user=&gt; 
user=&gt; (map-apply f '((7 8) (3 4) (5 6)))
(53 25 39)
user=&gt;
</pre>
</div>

<p>
<b>Partial</b>
</p>

<p>
Partial - Partial application. 
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; ((partial + 3) 4)
7
user=&gt; (map (partial + 3) '(1 2 3 4 5 6))
(4 5 6 7 8 9)
user=&gt;
</pre>
</div>

<p>
<b>Comp</b>
</p>

<p>
Function Composition
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; ((comp (partial + 3) (partial * 4)) 10)
43
user=&gt;


user=&gt; (map (comp (partial + 3) (partial * 4)) '(1 2 3 4 5 6))
(7 11 15 19 23 27)
user=&gt;


   comp - Can be used to invert predicates

user=&gt; (filter (comp not zero?) [0 1 0 2 0 3 0 4])
(1 2 3 4)
user=&gt;
</pre>
</div>

<p>
<b>Juxt</b>
</p>

<p>
Apply a list of functions to a single argument.
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (def f (juxt (partial + 3) (partial * 4) (partial * 5)))
#'user/f
user=&gt; (f 5)
[8 20 25]
user=&gt; (map f '(1 2 3 4 5))
([4 4 5] [5 8 10] [6 12 15] [7 16 20] [8 20 25])
user=&gt;


user=&gt; ((juxt + * min max) 3 4 6)
[13 72 3 6]
user=&gt;
</pre>
</div>

<p>
<b>dotimes</b>
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; 
(dotimes [x 10]
          (dotimes [y 10]
            (print (format "%3d " (* (inc x) (inc y)))))
          (println))
  1   2   3   4   5   6   7   8   9  10 
  2   4   6   8  10  12  14  16  18  20 
  3   6   9  12  15  18  21  24  27  30 
  4   8  12  16  20  24  28  32  36  40 
  5  10  15  20  25  30  35  40  45  50 
  6  12  18  24  30  36  42  48  54  60 
  7  14  21  28  35  42  49  56  63  70 
  8  16  24  32  40  48  56  64  72  80 
  9  18  27  36  45  54  63  72  81  90 
 10  20  30  40  50  60  70  80  90 100 
nil
user=&gt;
</pre>
</div>

<p>
<b>doseq</b>
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (doseq [x '[1 2 3 4 5]]  (println (+ 2 (* 3 x))))
5
8
11
14
17
nil
user=&gt; 

user=&gt; (doseq [x '[1 2 3]
               y '[a b c d e]
               ]
         (println (list x y)))
(1 a)
(1 b)
(1 c)
(1 d)
(1 e)
(2 a)
(2 b)
(2 c)
(2 d)
(2 e)
(3 a)
(3 b)
(3 c)
(3 d)
(3 e)
nil
user
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-3-6-3" class="outline-5">
<h5 id="sec-1-3-6-3"><span class="section-number-5">1.3.6.3</span> Lazy Higher Order Functions</h5>
<div class="outline-text-5" id="text-1-3-6-3">
<p>
<b>Iterate</b>
</p>

<p>
The same as the higher order function iterate from Haskell
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; 
user=&gt; (take 5 (iterate (partial + 1) 0))
(0 1 2 3 4)
user=&gt; 
user=&gt; (take 15 (iterate (partial + 1) 0))
(0 1 2 3 4 5 6 7 8 9 10 11 12 13 14)
user=&gt; 
user=&gt; (take 15 (iterate (partial * 2) 1))
(1 2 4 8 16 32 64 128 256 512 1024 2048 4096 8192 16384)
user=&gt;
</pre>
</div>

<p>
<b>Repeat</b>
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (take 5 (repeat 10))
(10 10 10 10 10)
user=&gt; (take 5 (repeat 5))
(5 5 5 5 5)
user=&gt; (take 5 (repeat "a"))
("a" "a" "a" "a" "a")
user=&gt;
</pre>
</div>

<p>
<b>Repeatedly</b>
</p>

<p>
Repeatedly works just like repeat, except that it takes a function instead of a value. It calls the function (which must take no arguments, and has side effects) repeatedly and returns a lazy sequence of its values. 
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (repeatedly 5 #(rand-int 500))
(303 29 253 250 120)
user=&gt;
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4"><span class="section-number-3">1.4</span> List Comprehension</h3>
<div class="outline-text-3" id="text-1-4">
<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (for [x [1 2 3 4]] (* 3 x))
(3 6 9 12)
user=&gt; 

user=&gt; (for [x [1 2 3 4], y [4 5 6]] (+ x y))
(5 6 7 6 7 8 7 8 9 8 9 10)
user=&gt; 

user=&gt; (for [x [1 2 3 4], y [4 5 6]] (println {:x x, :y y :r (+ x y)}))
({:x 1, :y 4, :r 5}
{:x 1, :y 5, :r 6}
{:x 1, :y 6, :r 7}
nil nil {:x 2, :y 4, :r 6}
{:x 2, :y 5, :r 7}
{:x 2, :y 6, :r 8}
nil nil nil {:x 3, :y 4, :r 7}
{:x 3, :y 5, :r 8}
{:x 3, :y 6, :r 9}
nil nil nil {:x 4, :y 4, :r 8}
{:x 4, :y 5, :r 9}
{:x 4, :y 6, :r 10}
nil nil nil nil)


;;; List comprehension with guards
;;

user=&gt; (for [x (range 20)  :when (= (mod x 3) 0)]  x )
(0 3 6 9 12 15 18)
user=&gt; 
user=&gt;    

user=&gt; (for [x (range 20)  :while (&lt; x 10)]  x )
(0 1 2 3 4 5 6 7 8 9)
user=&gt; 
user=&gt; 


user=&gt; 
(for [ c (range 1 30)
      a (range 1 (+ 1 c))
      b (range 1 (+ 1 a))
      :when (= (+ (* a a) (* b b)) (* c c))] 

      [a b c])
([4 3 5] [8 6 10] [12 5 13] [12 9 15] 
[15 8 17] [16 12 20] [20 15 25] 
[24 7 25] [24 10 26] [21 20 29])
user=&gt;
</pre>
</div>

<p>
See also:
</p>

<ul class="org-ul">
<li><a href="https://www.recurse.com/blog/13-list-comprehensions-in-eight-lines-of-clojure">List comprehensions in eight lines of Clojure</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5"><span class="section-number-3">1.5</span> S-expression parser, Serializer and Interpreter</h3>
<div class="outline-text-3" id="text-1-5">
<p>
<b>eval</b>
</p>

<p>
Evaluates, interprets a S-expression.
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (eval '(+ 1 2 3 4 5))
15
user=&gt; (eval '(Math/exp 3))
20.085536923187668
user=&gt;
</pre>
</div>

<p>
<b>load</b>
</p>

<p>
Evaluates, interprets a file containing clojure code, S-expressions.
</p>

<pre class="example">
(load &lt;filename.clj&gt;)
</pre>

<p>
<b>read-string</b>
</p>

<p>
Parses a S-expression.
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (read-string "(Math/exp 3)")
(Math/exp 3)
user=&gt; 


user=&gt; (eval (read-string "(Math/exp 3)"))
20.085536923187668
user=&gt; 

user=&gt; (read-string "{:a 10, :b 20, :c [1 a b c d]}")
{:a 10, :b 20, :c [1 a b c d]}
user=&gt;
</pre>
</div>



<p>
<b>load-string</b>
</p>

<p>
Evaluates a string.
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (def code "(println \"(+ 2 2) =\" ) (+ 2 2)")
#'user/code

user=&gt; code
"(println \"(+ 2 2) =\" ) (+ 2 2)"

user=&gt; (println code)
(println "(+ 2 2) =" ) (+ 2 2)
nil

user=&gt; (load-string code)
(+ 2 2) =
4
user=&gt;
</pre>
</div>

<p>
<b>pr-str</b>
</p>

<p>
Serialize a s-expression to string.
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (pr-str [1 2 3 4 5])
"[1 2 3 4 5]"

user=&gt; (pr-str {:a 10 :b 20 :c '[1 a b c d]})
"{:a 10, :b 20, :c [1 a b c d]}"
user=&gt; 

user=&gt; (pr-str '(def f [x] (+ x 3))
)
"(def f [x] (+ x 3))"
user=&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-6" class="outline-3">
<h3 id="sec-1-6"><span class="section-number-3">1.6</span> IO / Input and Output</h3>
<div class="outline-text-3" id="text-1-6">
<p>
<b>Print</b>
</p>

<p>
Print in the current line.
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (print "Hello world")
Hello worldnil
user=&gt;
</pre>
</div>

<p>
<b>Println</b>
</p>

<p>
Print in a new line.
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (println '[1 2 3 sym1 sym2 sym3 "str"])
[1 2 3 sym1 sym2 sym3 str]
nil

(do 
     (println "Multiple")
     (println "Line")
     (println "printing")
     (println 'a))
Multiple
Line
printing
a
nil
user=&gt;
</pre>
</div>

<p>
<b>Slurp</b>
</p>

<p>
<a href="https://clojuredocs.org/clojure.core/slurp">Documentation</a>
</p>

<p>
Read file, internet protocol like http, ftp &#x2026;
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (println (slurp "/etc/host.conf"))
# The "order" line is only used by old versions of the C library.
order hosts,bind
multi on

nil
user=&gt; 

user=&gt; (slurp "http://httpbin.org/user-agent")
"{\n  \"user-agent\": \"Java/1.8.0_51\"\n}\n"
user=&gt;

user=&gt; (println (slurp "http://httpbin.org/user-agent"))
{
  "user-agent": "Java/1.8.0_51"
}

nil
user=&gt;
</pre>
</div>

<p>
<b>Spit</b>
</p>

<p>
<a href="https://clojuredocs.org/clojure.core/spit">Documentation</a>
</p>

<p>
Write a file.
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; 
user=&gt; (spit "/tmp/filetest.txt" "hello world clojure")
nil
user=&gt; (slurp "/tmp/filetest.txt")
"hello world clojure"
user=&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-7" class="outline-3">
<h3 id="sec-1-7"><span class="section-number-3">1.7</span> Documentation / Docstring and Reflection, Instrospection</h3>
<div class="outline-text-3" id="text-1-7">
<p>
<b>Show docstring</b>
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (doc apply)
-------------------------
clojure.core/apply
([f args] [f x args] [f x y args] [f x y z args] [f a b c d &amp; args])
  Applies fn f to the argument list formed by prepending intervening arguments to args.
nil
user=&gt; 

user=&gt; (doc Math/sin)
nil
user=&gt;
</pre>
</div>

<p>
<b>Retrive Source Code</b>
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (source reverse)
(defn reverse
  "Returns a seq of the items in coll in reverse order. Not lazy."
  {:added "1.0"
   :static true}
  [coll]
    (reduce1 conj () coll))
nil
user=&gt;
</pre>
</div>

<p>
<b>Show all functions in a name space</b>
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (dir clojure.string)
blank?
capitalize
escape
join
lower-case
re-quote-replacement
replace
replace-first
reverse
split
split-lines
trim
trim-newline
triml
trimr
upper-case
nil
</pre>
</div>

<p>
<b>Inspect a Table</b>
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (require 'clojure.inspector)
nil

user=&gt; (clojure.inspector/inspect-table '((1 2 3) (a b c) (e f g)))
</pre>
</div>


<div class="figure">
<p><img src="images/Clojure_Inspector.png" alt="Clojure_Inspector.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-8" class="outline-3">
<h3 id="sec-1-8"><span class="section-number-3">1.8</span> Macros</h3>
<div class="outline-text-3" id="text-1-8">
<p>
Clojure macros are based on Common Lisp macros.
</p>
</div>

<div id="outline-container-sec-1-8-1" class="outline-4">
<h4 id="sec-1-8-1"><span class="section-number-4">1.8.1</span> Quasi quote</h4>
</div>


<div id="outline-container-sec-1-8-2" class="outline-4">
<h4 id="sec-1-8-2"><span class="section-number-4">1.8.2</span> Macros by Example</h4>
<div class="outline-text-4" id="text-1-8-2">
<p>
<b>Print all forms inside the parenthesis</b>
</p>

<div class="org-src-container">

<pre class="src src-clojure">(defmacro $p [func &amp; args]
  `(println (~func ~@args)))


user=&gt; (slurp "http://httpbin.org/get")
"{\n  \"args\": {}, \n  \"headers\": {\n    \"Accept\": \"text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2\", \n    \"Host\": \"httpbin.org\", \n    \"User-Agent\": \"Java/1.8.0_51\"\n  }, \n  \"origin\": \"183.173.124.2\", \n  \"url\": \"http://httpbin.org/get\"\n}\n      


user=&gt; ($p slurp "http://httpbin.org/get")
{
  "args": {}, 
  "headers": {
    "Accept": "text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2", 
    "Host": "httpbin.org", 
    "User-Agent": "Java/1.8.0_51"
  }, 
  "origin": "183.173.124.2", 
  "url": "http://httpbin.org/get"
}

;; Macro expansion
;; 
user=&gt; (macroexpand '($p slurp "http://httpbin.org/get"))
(clojure.core/println (slurp "http://httpbin.org/get"))
user=&gt;
</pre>
</div>

<p>
<b>Invert a boolean value from a s-expression</b>
</p>

<div class="org-src-container">

<pre class="src src-clojure">(defmacro $n [func &amp; args]
  `(not (~func ~@args)))

user=&gt; (def x 10)
#'user/x
user=&gt; 

user=&gt; (or (&gt; 3 x) (= 5 x) (&lt; 15))
true

user=&gt; ($n or (&gt; 3 x) (= 5 x) (&lt; 15))
false
user=&gt; 

user=&gt; (macroexpand '($n or (&gt; 3 x) (= 5 x) (&lt; 15)))
(clojure.core/not (or (&gt; 3 x) (= 5 x) (&lt; 15)))
user=&gt;
</pre>
</div>

<p>
<b>Debugging Injection Macro</b>
</p>

<div class="org-src-container">

<pre class="src src-clojure">(defmacro $d [func &amp; args]
  `(let
       [p# (~func ~@args)]
     (do
       (println (str (quote (~func ~@args)) " = " p#))
       p#)))

user=&gt; (+ 10 ($d + 3 ($d * 3 4)  ($d * 1 2 3 4 5)))
(* 3 4) = 12
(* 1 2 3 4 5) = 120
(+ 3 ($d * 3 4) ($d * 1 2 3 4 5)) = 135
145


user=&gt; (defn pyth [ x y ] ($d * ($d * x x) ($d * y y)))
#'user/pyth
user=&gt; (pyth 4 5)
(* x x) = 16
(* y y) = 25
(* ($d * x x) ($d * y y)) = 400
400
user=&gt;
</pre>
</div>


<p>
<b>Infix to Postfix operator</b>
</p>

<div class="org-src-container">

<pre class="src src-clojure">(defmacro $ [a op b]
  `(~op ~a ~b))

user=&gt; ($ 10 + 20)
30
user=&gt; ($ 3 * 10)
30
user=&gt; (macroexpand '($ 10 + 20))
(+ 10 20)
user=&gt;      

user=&gt; (def x 10)
#'user/x
user=&gt; 
user=&gt; ($ ($ 3 &gt; x) or ($ x &lt; 15))
true
</pre>
</div>

<p>
See also:
</p>

<ul class="org-ul">
<li><a href="https://aphyr.com/posts/305-clojure-from-the-ground-up-macros">Clojure from the ground up: macros</a>
</li>

<li><a href="https://yobriefca.se/blog/2014/05/19/the-weird-and-wonderful-characters-of-clojure/">The Weird and Wonderful Characters of Clojure</a>
</li>

<li><a href="http://bryangilbert.com/blog/2013/07/30/anatomy-of-a-clojure-macro/">The Anatomy of a Clojure Macro</a>
</li>

<li><a href="http://media.pragprog.com/titles/cjclojure/macro.pdf">Mastering Clojure Macros - Write Cleaner, Faster, Smarter Code</a>
</li>
</ul>
</div>
</div>
</div>


<div id="outline-container-sec-1-9" class="outline-3">
<h3 id="sec-1-9"><span class="section-number-3">1.9</span> Java Interoperability</h3>
<div class="outline-text-3" id="text-1-9">
<p>
One of greatest advantages of Clojure to other Lisp's dialects is the Java interoperabilty that allows the user to use the full power of Java ecosystem.
</p>
</div>

<div id="outline-container-sec-1-9-1" class="outline-4">
<h4 id="sec-1-9-1"><span class="section-number-4">1.9.1</span> Java API Access</h4>
<div class="outline-text-4" id="text-1-9-1">
<div class="org-src-container">

<pre class="src src-clojure">user=&gt; 
user=&gt;  (System/getProperty "java.vm.version")
"25.51-b03"
user=&gt;  (System/getProperty "java.home")
"/opt/java/jre"
user=&gt;  (System/getProperty "java.runtime.name")
"Java(TM) SE Runtime Environment"
user=&gt;  (System/getProperty "java.vm.name")
"Java HotSpot(TM) Server VM"
user=&gt;  (System/getProperty "java.vm.vendor")
"Oracle Corporation"
user=&gt; 

user=&gt; (map #(System/getProperty %) 
'("java.vm.vendor" 
"java.home" 
"java.runtime.name" 
"java.vm.name"))

("Oracle Corporation" 
"/opt/java/jre" 
"Java(TM) SE Runtime Environment" 
"Java HotSpot(TM) Server VM")
user=&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-9-2" class="outline-4">
<h4 id="sec-1-9-2"><span class="section-number-4">1.9.2</span> Call Class Static Method</h4>
<div class="outline-text-4" id="text-1-9-2">
<div class="org-src-container">

<pre class="src src-clojure">;;; java.lang.Math.log10(10);
;;
user=&gt; (java.lang.Math/log10 100)
2.0

user=&gt; (map java.lang.Math/log10 '[1 10 100 1000])
CompilerException java.lang.RuntimeException: Unable to find static field: log10 in class java.lang.Math, compiling:(NO_SOURCE_PATH:28:1) 
user=&gt; 

user=&gt; (map #(java.lang.Math/log10 %) '[1 10 100 1000])
(0.0 1.0 2.0 3.0)
user=&gt; 

user=&gt; 
user=&gt; (def log10 #(java.lang.Math/log10 %))
#'user/log10
user=&gt; 
user=&gt; (map log10  '[1 10 100 1000])
(0.0 1.0 2.0 3.0)
user=&gt; 

;;; Or Just: 

user=&gt; (def log10 #(Math/log10 %))
#'user/log10
user=&gt; 
user=&gt; (map log10  '[1 10 100 1000])
(0.0 1.0 2.0 3.0)
user=&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-9-3" class="outline-4">
<h4 id="sec-1-9-3"><span class="section-number-4">1.9.3</span> Java Constructor and Methods</h4>
<div class="outline-text-4" id="text-1-9-3">
<div class="org-src-container">

<pre class="src src-clojure">;;; Create a new data object
;;
user=&gt; (new java.util.Date)
#inst "2015-10-02T20:27:21.801-00:00"
user=&gt; 

user=&gt; 
user=&gt; (def today (new java.util.Date))
#'user/today
user=&gt; today
#inst "2015-10-02T20:27:50.289-00:00"
user=&gt; 
user=&gt; (.toString today)
"Fri Oct 02 17:27:50 BRT 2015"
user=&gt; 

user=&gt; 
user=&gt; (.getMonth today) ;;; today.getMonth()
9
user=&gt; (.getYear today)  ;;; today.getYear()
115

user=&gt; (+ 1900 (.getYear today)) ;; 1900 + today.getYear()
2015
user=&gt;     

user=&gt; (.getDay today)
5
user=&gt;     

;;  Create a function that returns the current date object.
;;
user=&gt; (defn today-date [] (new java.util.Date))
#'user/today-date
user=&gt; 
user=&gt; (today-date)
#inst "2015-10-02T20:28:51.794-00:00"
user=&gt; 


;; The macro (memfn &lt;method&gt;) invokes a object method
;;

user=&gt; ((memfn getMonth) today)
9
user=&gt; 


;; Invoke the method .toString()
;;
;;
user=&gt; (def obj-&gt;string  (memfn toString))
#'user/obj-&gt;string
user=&gt; 

user=&gt; (obj-&gt;string today)
"Fri Oct 02 17:28:57 BRT 2015"
user=&gt; 


;; Invoke multiple methods at same time
;; 
user=&gt;  ((juxt (memfn getMonth) (memfn getYear) (memfn getYear)) today)
[9 115 115]
user=&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-9-4" class="outline-4">
<h4 id="sec-1-9-4"><span class="section-number-4">1.9.4</span> Doto Macro</h4>
<div class="outline-text-4" id="text-1-9-4">
</div><div id="outline-container-sec-1-9-4-1" class="outline-5">
<h5 id="sec-1-9-4-1"><span class="section-number-5">1.9.4.1</span> Doto Macro Expansion</h5>
<div class="outline-text-5" id="text-1-9-4-1">
<p>
<b>Without Doto Macro</b>
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (def j (new java.util.HashMap))
#'user/j
user=&gt; j
{}
user=&gt; (.put j "a" 100)
nil
user=&gt; (.put j "b" "Hello world")
nil
user=&gt; j
{"a" 100, "b" "Hello world"}
user=&gt;
</pre>
</div>

<p>
<b>With Doto Macro</b>
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (def j  
            (doto (new java.util.HashMap)
              (.put "a" 100)
              (.put "b" "Hello world")))
#'user/j
user=&gt; j
{"a" 100, "b" "Hello world"}
user=&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-9-4-2" class="outline-5">
<h5 id="sec-1-9-4-2"><span class="section-number-5">1.9.4.2</span> Simple GUI</h5>
<div class="outline-text-5" id="text-1-9-4-2">
<div class="org-src-container">

<pre class="src src-clojure">user=&gt; 
(doto (javax.swing.JFrame.)
  (.setLayout (java.awt.GridLayout. 2 2 3 3))
  (.add (javax.swing.JTextField.))
  (.add (javax.swing.JLabel. "Enter some text"))
  (.setSize 300 80)
  (.setVisible true))
</pre>
</div>


<div class="figure">
<p><img src="images/simplegui.png" alt="simplegui.png" />
</p>
</div>
</div>
</div>


<div id="outline-container-sec-1-9-4-3" class="outline-5">
<h5 id="sec-1-9-4-3"><span class="section-number-5">1.9.4.3</span> Java Import</h5>
<div class="outline-text-5" id="text-1-9-4-3">
<p>
<b>Import Packages</b>
</p>

<div class="org-src-container">

<pre class="src src-clojure">;; import java.util.Date,  java.util.Stack
;; import java.net.Proxy,  java.net.URI
;;
user=&gt; (import [java.util Date Stack] [java.net Proxy URI])
java.net.URI
user=&gt; (Date.)
#inst "2015-09-16T01:39:21.365-00:00"
user=&gt;

user=&gt; (java.util.Date.)
#inst "2015-09-16T18:11:15.686-00:00"
user=&gt; 
user=&gt; (new java.util.Date)
#inst "2015-09-16T18:11:21.166-00:00"
user=&gt;
</pre>
</div>


<p>
<b>Import Specific Packages from Java Libraries</b>
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; 
user=&gt; (import '(java.util Date GregorianCalendar))
java.util.GregorianCalendar
user=&gt; 
user=&gt; Date
java.util.Date
user=&gt; 
user=&gt; GregorianCalendar
java.util.GregorianCalendar
user=&gt; 
user=&gt; (new Date)
#inst "2015-09-16T18:12:46.308-00:00"
user=&gt; 
user=&gt; (new GregorianCalendar)
#inst "2015-09-16T15:12:54.212-03:00"
user=&gt;
</pre>
</div>


<p>
<b>Access Constans in a Java Class</b>
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (. java.util.Calendar APRIL)
3
user=&gt; java.util.Calendar/APRIL
3
user=&gt;


user=&gt; (import [java.util Calendar])
java.util.Calendar

user=&gt; 
user=&gt; (. Calendar APRIL)
3
user=&gt;
</pre>
</div>
</div>
</div>
</div>



<div id="outline-container-sec-1-9-5" class="outline-4">
<h4 id="sec-1-9-5"><span class="section-number-4">1.9.5</span> Classpath</h4>
<div class="outline-text-4" id="text-1-9-5">
<p>
Print Class Path
</p>

<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (System/getProperty "java.class.path")
"/opt/clojure.jar:/home/tux/PycharmProjects/clojure"
user=&gt;


user=&gt; (println (seq (.getURLs (java.lang.ClassLoader/getSystemClassLoader))))
(#object[java.net.URL 0x1ee81fc file:/opt/clojure.jar] #object[java.net.URL 0x2aa843 file:/home/tux/PycharmProjects/clojure/])
nil
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-9-6" class="outline-4">
<h4 id="sec-1-9-6"><span class="section-number-4">1.9.6</span> Load Jar file at run time</h4>
<div class="outline-text-4" id="text-1-9-6">
<div class="org-src-container">

<pre class="src src-clojure">(defn load-jar [jarfile]
     (.addURL
     (.getContextClassLoader (Thread/currentThread))
     (.toURL (.toURI (new java.io.File jarfile)))))

(load-jar "&lt;jarfile.jar&gt;")
(import &lt;jarfile-class...&gt;)
</pre>
</div>
</div>
</div>


<div id="outline-container-sec-1-9-7" class="outline-4">
<h4 id="sec-1-9-7"><span class="section-number-4">1.9.7</span> Java Instrospection</h4>
<div class="outline-text-4" id="text-1-9-7">
<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (.getMethods java.util.Date)
#object["[Ljava.lang.reflect.Method;" 0x826f61 "[Ljava.lang.reflect.Method;@826f61"]
user=&gt; 


user=&gt; (take 4 (.getMethods java.util.Date))
(#object[java.lang.reflect.Method 0x15fac5f "public void java.util.Date.setTime(long)"] #object[java.lang.reflect.Method 0x12793 "public long java.util.Date.getTime()"] #object[java.lang.reflect.Method 0x15572a7 "public static java.util.Date java.util.Date.from(java.time.Instant)"] #object[java.lang.reflect.Method 0x1d94571 "public int java.util.Date.getYear()"])
user=&gt; 

user=&gt; (map (memfn toString) (take 4 (.getMethods java.util.Date)))
("public void java.util.Date.setTime(long)" "public long java.util.Date.getTime()" "public static java.util.Date java.util.Date.from(java.time.Instant)" "public int java.util.Date.getYear()")
user=&gt; 

user=&gt; (defn for-each [f xs] (doseq [x xs] (f x)))
#'user/for-each
user=&gt; 

user=&gt; (for-each println (map (memfn toString) (take 4 (.getMethods java.util.Date))))
public void java.util.Date.setTime(long)
public long java.util.Date.getTime()
public static java.util.Date java.util.Date.from(java.time.Instant)
public int java.util.Date.getYear()
nil
user=&gt; 

user=&gt; (for-each println (map (memfn toString) (seq (.getMethods java.util.Date))))    
public void java.util.Date.setTime(long)
public long java.util.Date.getTime()
public static java.util.Date java.util.Date.from(java.time.Instant)
public int java.util.Date.getYear()
public int java.util.Date.getMonth()
public int java.util.Date.getDate()
public int java.util.Date.getHours()
public int java.util.Date.getMinutes()
public int java.util.Date.getSeconds()
public static long java.util.Date.UTC(int,int,int,int,int,int)
public void java.util.Date.setYear(int)
public void java.util.Date.setMonth(int)   
...

(defn get-methods [java-class]
    (map (memfn toString) 
        (seq ((memfn getMethods) java-class))))


(defn show-methods [java-class]
    (for-each println (get-methods java-class)))

user=&gt; (get-methods java.util.Date)
("public void java.util.Date.setTime(long)" "public long java.util.Date.getTime()" "public static java.util.Date java.util.Date.from(java.time.Instant)" "public int java.util.Date.getYear()" "public int java.util.Date.getMonth()" "public int java.util.Date.getDate()" "public int java.util.Date.getHours()" "public int java.util.Date.getMinutes()" "public int java.util.Date.getSeconds()" "public static long java.util.Date.UTC(int,int,int,int,int,int)" "public void java.util.Date.setYear(int)" "public void java.util.Date.setMonth(int)"


user=&gt; (show-methods java.util.Date)

public void java.util.Date.setTime(long)
public long java.util.Date.getTime()
public static java.util.Date java.util.Date.from(java.time.Instant)
public int java.util.Date.getYear()
public int java.util.Date.getMonth()
public int java.util.Date.getDate()
public int java.util.Date.getHours()
public int java.util.Date.getMinutes()
public int java.util.Date.getSeconds()
...

user=&gt; (def m (get-methods java.util.Date))
#'user/m
user=&gt;

;;; Show the methods in the GUI
;;
user=&gt; (require 'clojure.inspector)
user=&gt; (clojure.inspector/inspect-tree m)
</pre>
</div>


<div class="figure">
<p><img src="images/Clojure_Inspector_methods.png" alt="Clojure_Inspector_methods.png" />
</p>
</div>

<div class="org-src-container">

<pre class="src src-clojure">;;; Get the name of a class
;;
user=&gt; (.getName java.util.Date)
"java.util.Date"

;; Get the class name of a class instance.
;;
user=&gt; (.getClass (new java.util.Date))
java.util.Date
user=&gt; 

;; Get Constructors
;;
(user=&gt; 
user=&gt; (map (memfn toString) (seq (.getConstructors java.util.Date)))
("public java.util.Date()" "public java.util.Date(long)" "public java.util.Date(int,int,int,int,int)" "public java.util.Date(int,int,int,int,int,int)" "public java.util.Date(java.lang.String)" "public java.util.Date(int,int,int)")
user=&gt; 


;; Get Fields
;;
;;
user=&gt; (map (memfn toString) (take 5 (.getFields javax.swing.JFrame)))
("public static final int javax.swing.JFrame.EXIT_ON_CLOSE" "public static final int javax.swing.WindowConstants.DO_NOTHING_ON_CLOSE" "public static final int javax.swing.WindowConstants.HIDE_ON_CLOSE" "public static final int javax.swing.WindowConstants.DISPOSE_ON_CLOSE" "public static final int javax.swing.WindowConstants.EXIT_ON_CLOSE")
user=&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-9-8" class="outline-4">
<h4 id="sec-1-9-8"><span class="section-number-4">1.9.8</span> Miscellaneous</h4>
<div class="outline-text-4" id="text-1-9-8">
<p>
Examples about calling Java API in Clojure.
</p>
</div>

<div id="outline-container-sec-1-9-8-1" class="outline-5">
<h5 id="sec-1-9-8-1"><span class="section-number-5">1.9.8.1</span> Parse Date</h5>
<div class="outline-text-5" id="text-1-9-8-1">
<div class="org-src-container">

<pre class="src src-clojure">user=&gt; (.parse (new java.text.SimpleDateFormat "dd/MM/yyyy") "03/01/2013")
#inst "2013-01-03T03:00:00.000-00:00"
user=&gt; 
user=&gt; 


(defn date-parser [date-format date-str]
  (.parse (new java.text.SimpleDateFormat date-format)
          date-str))

(defn date-dmy [sep date-str]
  (date-parser (str "dd" sep "mm" sep "yyyy") date-str))

(defn date-ymd [sep date-str]
  (date-parser (str "yyyy" sep "mm" sep "dddd") date-str))


(defn date-mdy [sep date-str]
  (date-parser (str "mm" sep "dd" sep "yyyy") date-str))

user=&gt; (date-dmy "/" "04/01/2013")
#inst "2013-01-04T03:01:00.000-00:00"
user=&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-9-8-2" class="outline-5">
<h5 id="sec-1-9-8-2"><span class="section-number-5">1.9.8.2</span> Get String from Clipboard</h5>
<div class="outline-text-5" id="text-1-9-8-2">
<p>
Java code:
</p>

<div class="org-src-container">

<pre class="src src-java"><span class="org-keyword">import</span> <span class="org-constant">java</span>.<span class="org-constant">awt</span>.<span class="org-type">Toolkit</span>;
<span class="org-keyword">import</span> <span class="org-constant">java</span>.<span class="org-constant">awt</span>.<span class="org-constant">datatransfer</span>.<span class="org-type">Clipboard</span>;
<span class="org-keyword">import</span> <span class="org-constant">java</span>.<span class="org-constant">awt</span>.<span class="org-constant">datatransfer</span>.<span class="org-type">DataFlavor</span>;

<span class="org-keyword">public</span> <span class="org-keyword">class</span> <span class="org-type">GetStringFromClipboard</span> {

    <span class="org-keyword">public</span> <span class="org-keyword">static</span> <span class="org-type">void</span> <span class="org-function-name">main</span>(<span class="org-type">String</span>[] <span class="org-variable-name">args</span>) <span class="org-keyword">throws</span> <span class="org-type">Exception</span> {

        <span class="org-type">Toolkit</span> <span class="org-variable-name">toolkit</span> = Toolkit.getDefaultToolkit();
        <span class="org-type">Clipboard</span> <span class="org-variable-name">clipboard</span> = toolkit.getSystemClipboard();
        <span class="org-type">String</span> <span class="org-variable-name">result</span> = (<span class="org-type">String</span>) clipboard.getData(DataFlavor.stringFlavor);
        System.out.println(<span class="org-string">"String from Clipboard:"</span> + result);
    }

}
</pre>
</div>

<p>
Clojure Code;
</p>

<div class="org-src-container">

<pre class="src src-clojure">(import java.awt.Toolkit)
(import [java.awt.datatransfer Clipboard DataFlavor])

(defn getClipboard [] 
    (-&gt;
     (Toolkit/getDefaultToolkit)
     .getSystemClipboard
     (.getData DataFlavor/stringFlavor)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-9-8-3" class="outline-5">
<h5 id="sec-1-9-8-3"><span class="section-number-5">1.9.8.3</span> Http POST/GET</h5>
<div class="outline-text-5" id="text-1-9-8-3">
<p>
Java Code: <a href="http://www.mkyong.com/java/how-to-send-http-request-getpost-in-java/">How to send HTTP request GET/POST in Java</a>
</p>

<p>
There is a Clojure library for this: <a href="https://github.com/dakrone/clj-http">clj-http</a>
</p>



<div class="org-src-container">

<pre class="src src-clojure">( import java.io.BufferedReader )
( import java.io.IOException )
( import java.io.InputStreamReader )
( import java.io.OutputStream )
( import java.net.HttpURLConnection )
( import java.net.URL )

(defn buffread-&gt;string [buff]
  (clojure.string/join "\n"
                       (line-seq buff)))

(defn format-params [params]
  (clojure.string/join "&amp;"
                       (map #(format "%s=%s" %1 %2)
                            (keys params) (vals params))))


(defn http-get
  "
   http-get &lt;url&gt; [:user-agent &lt;user-agent string] [:params {key: value}]

  "

  [url &amp; {:keys [user-agent params]
                        :or { user-agent "",  params {}}}]                 
  (let
      [
       conn (doto (.openConnection (new URL url))
             (.setRequestMethod "GET") 
             (.setRequestProperty "User-Agent" user-agent)
             (.setDoOutput false))


       in   (new BufferedReader
                 (new InputStreamReader
                      (.getInputStream conn)))
       ]
  (if (not (= (.getResponseCode conn) 200))
    nil ;; Request has failed
    (buffread-&gt;string in))))

(defn http-post
  "
   http-post &lt;url&gt; [:user-agent &lt;user-agent string] [:params {key: value}]

  "
  [url &amp; {:keys [user-agent params]
                        :or { user-agent "",  params {}}}]                 
  (let
      [
       conn (doto (.openConnection (new URL url))
             (.setRequestMethod "POST") 
             (.setRequestProperty "User-Agent" user-agent)
             (.setDoOutput true))


       os  (doto (.getOutputStream conn)
             (.write (.getBytes (format-params params)))
             (.flush)
             (.close))

       in   (new BufferedReader
                 (new InputStreamReader
                      (.getInputStream conn)))
       ]
  (if (not (= (.getResponseCode conn) 200))
    nil ;; Request has failed
    (buffread-&gt;string in))))


user=&gt; (println (http-get "http://httpbin.org/headers" :user-agent "http://httpbin.org/get"))
{
  "headers": {
    "Accept": "text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2", 
    "Host": "httpbin.org", 
    "User-Agent": "http://httpbin.org/get"
  }
}
nil
user=&gt; 

user=&gt; (println (http-post "http://httpbin.org/post" :params {"user" "dummy" "name" "john"}))

{
  "args": {}, 
  "data": "", 
  "files": {}, 
  "form": {
    "name": "john", 
    "user": "dummy"
  }, 
  "headers": {
    "Accept": "text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2", 
    "Content-Length": "20", 
    "Content-Type": "application/x-www-form-urlencoded", 
    "Host": "httpbin.org", 
    "User-Agent": "FIREFOX"
  }, 
  "json": null, 
  "url": "http://httpbin.org/post"
}
nil


user=&gt; (println (http-post "http://httpbin.org/post" :params {"currency" "BRL" "country" "BRAZIL" "lang" "pt-BR"}))
{
  "args": {}, 
  "data": "", 
  "files": {}, 
  "form": {
    "country": "BRAZIL", 
    "currency": "BRL", 
    "lang": "pt-BR"
  }, 
  "headers": {
    "Accept": "text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2", 
    "Content-Length": "38", 
    "Content-Type": "application/x-www-form-urlencoded", 
    "Host": "httpbin.org", 
    "User-Agent": ""
  }, 
  "json": null, 
  "method": "POST", 
  "origin": "187.113.121.52", 
  "url": "http://httpbin.org/post"
}
nil
user=&gt;
</pre>
</div>
</div>
</div>
</div>
</div>



<div id="outline-container-sec-1-10" class="outline-3">
<h3 id="sec-1-10"><span class="section-number-3">1.10</span> Resources</h3>
<div class="outline-text-3" id="text-1-10">
</div><div id="outline-container-sec-1-10-1" class="outline-4">
<h4 id="sec-1-10-1"><span class="section-number-4">1.10.1</span> Books</h4>
<div class="outline-text-4" id="text-1-10-1">
<ul class="org-ul">
<li><a href="https://en.wikibooks.org/wiki/Clojure_Programming/Examples/API_Examples/do_Macros">Clojure Programming/Examples/API Examples/do Macros</a>
</li>

<li><a href="http://daly.axiom-developer.org/clojure.pdf">Clojure In Small Pieces - Rich Hickey</a>
</li>

<li><a href="https://books.google.co.uk/books?id=xX38AgAAQBAJ&pg=PA206&lpg=PA206&dq=clojure+parse+xml+find+tag&source=bl&ots=M0SxaO985_&sig=6lBwQ23lpmt5Hxsp_lATqdXPp1g&hl=en&sa=X&ved=0CGIQ6AEwBzgKahUKEwiE9qOwlq7IAhXFhJAKHf0ODtA#v=onepage&q=clojure%20parse%20xml%20find%20tag&f=false">Clojure Cookbook: Recipes for Functional Programming</a>
</li>

<li><a href="https://www.packtpub.com/big-data-and-business-intelligence/clojure-data-science">Clojure for Data Science</a>
</li>

<li><a href="http://www.adamtornhill.com/articles/lispweb.htm">Update: Lisp for the Web goes book</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-10-2" class="outline-4">
<h4 id="sec-1-10-2"><span class="section-number-4">1.10.2</span> Tutorials</h4>
<div class="outline-text-4" id="text-1-10-2">
<ul class="org-ul">
<li><a href="http://java.ociweb.com/mark/clojure/article.html">Clojure - Functional Programming for the JVM</a>
</li>

<li><a href="http://learnxinyminutes.com/docs/clojure/">http://learnxinyminutes.com/docs/clojure/</a>
</li>

<li><a href="http://adambard.com/blog/clojure-in-15-minutes/">http://adambard.com/blog/clojure-in-15-minutes/</a>
</li>

<li><a href="https://julianlaffey.wordpress.com/2013/04/25/untangling-clojures-do-functions-do-doall-dorun-doseq-dosync-dotimes-doto/">A field guide to Clojure’s ‘do’ functions – do, doall, dorun, doseq, dosync, dotimes, doto</a>
</li>

<li><a href="http://programming-pages.com/2012/02/04/simple-iteration-in-clojure/">Simple iteration in Clojure</a>
</li>

<li><a href="http://blog.n01se.net/blog-n01se-net-p-33.html">Writing a macro: for vs. doseq</a>
</li>

<li><a href="http://www.infoq.com/articles/in-depth-look-clojure-collections">An In-Depth Look at Clojure Collections</a>
</li>

<li><a href="http://clojure-doc.org/articles/language/functions.html">Functions in Clojure</a>
</li>

<li><a href="http://rubylearning.com/blog/2010/07/26/clojure-tips-from-the-experts/">Clojure Tips from the Experts</a>
</li>

<li><a href="http://theatticlight.net/posts/Lazy-Sequences-in-Clojure/">Lazy Sequences in Clojure</a>
</li>

<li><a href="http://programming-pages.com/2012/01/16/recursion-in-clojure/">Recursion in Clojure/ Tail Recursion</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-10-3" class="outline-4">
<h4 id="sec-1-10-3"><span class="section-number-4">1.10.3</span> Misc</h4>
<div class="outline-text-4" id="text-1-10-3">
<ul class="org-ul">
<li><a href="http://blog.ndk.io/2014/01/26/clojure-compilation.html">Clojure Compilation: Parenthetical Prose to Bewildering Bytecode</a>
</li>

<li><a href="http://stuartsierra.com/2009/08/31/thoughts-on-clojure-package-management">Thoughts on Clojure Package Management</a>
</li>

<li><a href="http://stuartsierra.com/2009/09/03/mavens-not-so-bad">Maven’s Not So Bad: Further Thoughts on Clojure Package Management</a>
</li>

<li><a href="http://stuartsierra.com/download/clojure_slides_philly_2009-07-21.pdf">Clojure and Modularity</a>
</li>

<li><a href="http://thinkrelevance.com/blog/2013/06/04/clojure-workflow-reloaded">My Clojure Workflow, Reloaded</a>
</li>

<li><a href="http://inclojurewetrust.blogspot.com/2010/11/how-to-build-gui-with-netbeans-and.html">How to build a GUI with NetBeans and Clojure</a>
</li>

<li><a href="http://hypirion.com/musings/advanced-intermixing-java-clj">Advanced Clojure and Java Mixing in Leiningen</a>
</li>

<li><a href="http://stackoverflow.com/questions/10808898/install-jar-from-remote-repo-clojar">install JAR from remote repo (clojar)</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-10-4" class="outline-4">
<h4 id="sec-1-10-4"><span class="section-number-4">1.10.4</span> Design</h4>
<div class="outline-text-4" id="text-1-10-4">
<ul class="org-ul">
<li><a href="http://z.caudate.me/immutability-time-and-task-schedulers/">Immutability, time and testable task schedulers by Chris Zheng</a>
</li>

<li><a href="https://fedcsis.org/proceedings/2013/pliks/336.pdf">Rapid Application Prototyping for Functional Languages</a>
</li>

<li><a href="http://www.helptouser.com/code/233171-what-is-the-best-way-to-do-guis-in-clojure.html">What is the best way to do GUIs in Clojure?</a>
</li>

<li><a href="http://blog.circleci.com/rewriting-your-test-suite-in-clojure-in-24-hours/">Rewriting Your Test Suite in Clojure in 24 hours</a>
</li>

<li><a href="http://martintrojer.github.io/clojure/2011/11/29/scheme-as-an-embedded-dsl-in-clojure/">Scheme as an embedded DSL in Clojure</a>
</li>
</ul>


<ul class="org-ul">
<li><a href="http://amalloy.hubpages.com/hub/Dont-use-XML-JSON-for-Clojure-only-persistence-messaging">Don't use XML/JSON for Clojure-only persistence/messaging</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-10-5" class="outline-4">
<h4 id="sec-1-10-5"><span class="section-number-4">1.10.5</span> Selected Projects</h4>
<div class="outline-text-4" id="text-1-10-5">
<ul class="org-ul">
<li><a href="https://github.com/takeoutweight/clojure-scheme">clojure-scheme - Github</a>
</li>

<li><a href="https://gitlab.com/cloje/cloje">Cloje</a>
</li>

<li><a href="http://nakkaya.com/2011/06/29/ferret-an-experimental-clojure-compiler/">Ferret: An Experimental Clojure Compiler</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-10-6" class="outline-4">
<h4 id="sec-1-10-6"><span class="section-number-4">1.10.6</span> Presentation</h4>
<div class="outline-text-4" id="text-1-10-6">
<ul class="org-ul">
<li><a href="http://www.dynamic-languages-symposium.org/dls-08/program/media/RichHickey_2008_ClojureADynamicProgrammingLanguageForTheJvm_Dls.pdf">Clojure - A Dynamic Programming Language for the JVM by Rich Hickey</a>
</li>

<li><a href="http://www.slideshare.net/metosin/clojure-inreallife-17102014?related=1">Clojure in real life 17.10.2014</a>
</li>

<li><a href="http://www.slideshare.net/skillsmatter/clojure-and-swing">Clojure And Swing</a>
</li>

<li><a href="http://www.slideshare.net/mishadoff/writing-dsl-in-clojure?related=2">Writing DSL in Clojure</a>
</li>

<li><a href="http://www.slideshare.net/alexmiller/clojure-the-art-of-abstraction-7161663?related=3">Clojure: The Art of Abstraction</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-10-7" class="outline-4">
<h4 id="sec-1-10-7"><span class="section-number-4">1.10.7</span> Cases</h4>
<div class="outline-text-4" id="text-1-10-7">
<ul class="org-ul">
<li><a href="http://z.caudate.me/jvm-class-reflection-made-simple/">Making the Java Interop More Intuitive</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-10-8" class="outline-4">
<h4 id="sec-1-10-8"><span class="section-number-4">1.10.8</span> Selected Stack Overflow Questions</h4>
<div class="outline-text-4" id="text-1-10-8">
<ul class="org-ul">
<li><a href="http://stackoverflow.com/questions/6840425/with-clojure-read-read-string-function-how-do-i-read-in-a-clj-file-to-a-list-o">With clojure read/read-string function, how do i read in a .clj file to a list of objects</a>
</li>

<li><a href="http://stackoverflow.com/questions/10808898/install-jar-from-remote-repo-clojar">install JAR from remote repo (clojar)</a>
</li>

<li><a href="http://stackoverflow.com/questions/14165800/about-m2-repository-folder-creation">about .m2/repository folder creation</a>
</li>

<li><a href="http://stackoverflow.com/questions/15129760/converting-strings-into-dates-in-clojure">converting strings into dates in clojure</a>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-10-9" class="outline-4">
<h4 id="sec-1-10-9"><span class="section-number-4">1.10.9</span> Jar Repositories</h4>
<div class="outline-text-4" id="text-1-10-9">
<ul class="org-ul">
<li><a href="https://clojars.org/">https://clojars.org/</a>
</li>

<li><a href="http://mvnrepository.com/artifact">http://mvnrepository.com/artifact</a>
</li>

<li><a href="http://www.java2s.com/Code/Jar/c/">http://www.java2s.com/Code/Jar/c/</a>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2016-11-01 ter 01:52</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 25.1.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
